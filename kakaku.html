

<div class="search-box">
<input id="target" class="target" type="text" placeholder="任意のURLを入力" value="" name="kw">
<button class="btn-search">
  <img src="https://lets-hack.tech/wp-content/themes/keni80_wp_standard_all/images/icon/search_black.svg" width="18" height="18">
  <noscript>
    <img src="https://lets-hack.tech/wp-content/themes/keni80_wp_standard_all/images/icon/search_black.svg" width="18" height="18">
  </noscript>
</button>
</div>

<script>
var main = function(){
var target = $('#target').val()
$('#result').html('<img class="loading" src="/wp-content/themes/keni8-child/images/loading.svg">')
$.ajax({
    url: `/wp-content/php/mirror.php?url=${target}`,
    type: 'GET',
    dataType: 'html',
    cache: false
  }).done(function(data) {
    console.log("ok");
    $('#result').html($(data).find('h1').text());
  }).fail(function(XMLHttpRequest, textStatus, errorThrown) {
    console.log("error");
  })
}
 
$('.btn-search').on('click',main);
 
$( '#target' ).keypress( function ( e ) {
  if ( e.which == 13 ) {
    console.log("key" + e.which);
    main();
    return false;
  };
});
</script>

